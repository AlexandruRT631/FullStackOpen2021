(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),s=t.n(c),a=t(3),o=t(1),r=t(0),u=function(e){return Object(r.jsx)("form",{children:Object(r.jsxs)("div",{children:["filter shown with ",Object(r.jsx)("input",{value:e.newSearch,onChange:e.handleSearchChange})]})})},i=function(e){return Object(r.jsxs)("form",{children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(r.jsxs)("div",{children:["number: ",Object(r.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",onClick:e.addPerson,children:"add"})})]})},l=t(4),d=t.n(l),h="/api/persons",j={getAll:function(){return d.a.get(h).then((function(e){return e.data}))},create:function(e){return d.a.post(h,e).then((function(e){return e.data}))},update:function(e,n){return d.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},deletePerson:function(e){return d.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))}},b=function(e){window.confirm("Delete ".concat(e.person.name," ?"))&&j.deletePerson(e.person.id).then((function(){e.setMessageStyle("success"),e.setMessage("Information of ".concat(e.person.name," was removed")),setTimeout((function(){e.setMessage(null)}),5e3),j.getAll().then((function(n){e.setPersons(n)}))}))},f=function(e){return Object(r.jsxs)("li",{children:[e.person.name," ",e.person.number,Object(r.jsx)("button",{onClick:function(){return b(e)},children:"delete"})]})},m=function(e){return Object(r.jsx)("ul",{children:e.persons.filter((function(n){return!0===n.name.toLowerCase().includes(e.newSearch.toLowerCase())})).map((function(n){return Object(r.jsx)(f,{person:n,setPersons:e.setPersons,setMessage:e.setMessage,setMessageStyle:e.setMessageStyle},n.name)}))})},O=function(e){return null===e.message?null:Object(r.jsx)("div",{className:e.messageStyle,children:e.message})},g=function(){var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],s=Object(o.useState)(""),l=Object(a.a)(s,2),d=l[0],h=l[1],b=Object(o.useState)(""),f=Object(a.a)(b,2),g=f[0],p=f[1],x=Object(o.useState)(""),w=Object(a.a)(x,2),v=w[0],S=w[1],C=Object(o.useState)(null),y=Object(a.a)(C,2),N=y[0],M=y[1],P=Object(o.useState)("success"),k=Object(a.a)(P,2),A=k[0],L=k[1];Object(o.useEffect)((function(){j.getAll().then((function(e){c(e)}))}),[]);return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(O,{message:N,messageStyle:A}),Object(r.jsx)(u,{newSearch:v,handleSearchChange:function(e){S(e.target.value)}}),Object(r.jsx)("h2",{children:"Add a new"}),Object(r.jsx)(i,{newName:d,handleNameChange:function(e){h(e.target.value)},newNumber:g,handleNumberChange:function(e){p(e.target.value)},addPerson:function(e){e.preventDefault();var n={name:d,number:g},s=t.map((function(e){return e.name.toLowerCase()})).indexOf(n.name.toLowerCase());-1===s?(j.create(n).then((function(e){c(t.concat(e))})),L("success"),M("Added ".concat(n.name)),setTimeout((function(){M(null)}),5e3)):window.confirm("".concat(n.name," is already added to the phonebook, replace the old number with a new one?"))&&j.update(t[s].id,n).then((function(e){c(t.map((function(n){return n.id!==t[s].id?n:e}))),L("success"),M("".concat(n.name,"'s number has been changed")),setTimeout((function(){M(null)}),5e3)})).catch((function(){j.getAll().then((function(e){c(e)})),L("error"),M("Information of ".concat(n.name," has already been removed from server")),setTimeout((function(){M(null)}),8e3)})),h(""),p("")}}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(m,{persons:t,newSearch:v,setPersons:c,setMessage:M,setMessageStyle:L})]})};t(38);s.a.render(Object(r.jsx)(g,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.e9af67af.chunk.js.map